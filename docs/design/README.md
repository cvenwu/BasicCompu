# 设计
手写代码：实现无锁同步 （×：我写成了 CAS 操作，被打断，说特定的 ARM 处理器没有 这个同步原语，不能依赖相关指令。包括信号量等也不行。）

手写代码：自定场景，实现一个满足需求的内存池 （×：晕乎乎写出了几个 bug，面试官 眼尖…而且自我感觉回收算法不够好，感谢放过）

手写代码：从长序列中找出前 K 大的数字，堆排序


第二轮就难很多。问了 innodb 怎么实现，（我乱猜了 hashtable，后来看了网上是 lru。。 难为小哥听我这个错到离谱的答案了）

然后 dict 怎么实现，我说了 hash key，然后每个 key 后面有 linked list，然后问我如果 key collision 太多怎么办，回 答扩容，怎么扩，我说 copy 到新的地方，然后 copy 的时候 mutex_lock。感觉答错 了。。但面试官也没接着说。（妈耶我真的好菜）


5. 我现在要做一个限流功能, 怎么做？


这个限流要做成分布式的, 怎么做？

7. 怎么抢锁？锁怎么释放？

8. 加了超时之后有没有可能在没有释放的情况下, 被人抢走锁？怎么解决？

9. 不用 zk 的心跳，可以怎么解决这个问题呢？

10. 假如这个限流希望做成可配置的, 需要有一个后台管理系统随意对某个 api 配置全局流量, 怎么做？


11. 某一个业务中现在需要生成全局唯一的递增 ID, 并发量非常大, 怎么做？


12. 设计一个加密算法

13. 设计一个哈希函数