# Mysql

!> mysql面试题
[参考](https://zhuanlan.zhihu.com/p/140876416)

重点：事务，隔离级别，锁，索引，存储引擎

------------
## 事务

### 事务的特点或特性
!> ACID：分别对应原子性atomicity，一致性consistency，隔离性isolation，持久性durability
1. **原子性**，是指一个事务操作不可分割，要么成功，要么失败，不能有一半成功一半失败的情况。
2. **一致性**：是指这些数据在事务执行完成这个时间点之前，读到的一定是更新前的数据，之后读到的一定是更新后的数据，不应该存在一个时刻，让用户读到更新过程中的数据。
3. **隔离性**：是指一个事务的执行不能被其他事务干扰。即一个事务内部的操作及使用的数据对正在进行的其他事务是隔离的，并发执行的各个事务之间不能互相干扰，这个有点儿像我们打网游中的副本，我们在副本中打的怪和掉的装备，与其他副本没有任何关联也不会互相影响。
4. **持久性**：是指一个事务一旦完成提交，后续的其他操作和故障都不会对事务的结果产生任何影响

### 如何实现事务 我就回答了MVCC + 一顿猛吹

### 事务的隔离级别
### 提交读和可重复读的实现原理
### 事务隔离级别，对应的问题
### 事务的实现
### 事务的几个特性 2次 事务的特性以及对应的问题，如何保证的
### 事务的隔离有哪些,说一下每个隔离的区别,mysql默认使用哪个隔离,日常应用中应该使用已提交读还是可重复读
### 事务是什么
### mysql 隔离级别
### 数据库用的是什么？说说数据库事务的特性。
### mysql事务的隔离级别以及分别如何实现？
级别：
    读未提交
    读已提交
    可重复读
    串行化
实现：MVVC机制以及undo_log


### mysql 的事务锁了解吗

### mysql 的事务隔离级别有几种啊

### 那每一个事务隔离级别分别解决了什么问题呢

### 那可重复读能解决什么

### 讲讲可重复读隔离级别

### ACID 是什么？具体介绍一下。

------------
## 索引

### 索引的结构以及概念

### mysql索引的数据结构以及分类(B+树以及和B-树，红黑树，二叉树的优缺点，聚簇索引，非聚簇索引，hash索引的优缺点以及实现)
### 数据库中数据很多的时候如何处理？面试官提示了索引
索引越多越好么？
### mysql索引结构，
### B+树有什么好处
### 二叉树，b 树，b+树的区别
### InnoDB二级索引流程
### 主键和索引的区别
### mysql索引类型有哪些
### b+树的特性，为啥要用到这
### 如何提高索引的速度
### B+ Tree
### innodb的索引有哪些
### 数据库使用b+树的好处
### 联合索引的使用原则
### 如何创建索引
### 数据库的索引
### mysql索引
### mysql 索引慢分析（线上开启slowlog，提取慢查询，然后仔细分析explain 中 tye字段以及extra字段，发生的具体场景及mysql是怎么做的，被表扬回答的不错）
### 数据库索引结构是什么样的
我回答B+树，然后问对磁盘有什么优势
夺命追问，我说降低IO次数，问为什么
### B+树的特点
### mysql 索引 2次
### 了解Mysql中的索引：涉及到什么是B树，与二叉搜索树和平衡二叉树区别，以及B+树区别
二叉排序树(Binary Sort Tree)，又称为二叉查找树，它或者是一颗空树，或者是具有下列性质的二叉树：
1. 若它的左子树不为空，则左子树上所有节点的值均小于它的根节点的值
2. 若它的右子树不为空，则右子树上所有节点的值均大于它的根节点的值
3. 它的左右子树也分别为二叉排序树

平衡二叉树(self-Balancing Binary Search Tree，也叫做AVL树)，是一种二叉排序树，其中每一个节点的左右子树的高度差至多等于1
前提首先是一颗二叉排序树，而后需要保持平衡特性所以就叫做平衡二叉树。

2-3树是这样的一颗多路查找树，其中每一个节点都具有两个孩子(我们称为2节点)或三个孩子(我们称为3节点)

一个2节点包含一个元素和两个孩子(或没有孩子)，且与二叉排序树类似，左子树包含的元素小于该元素，右子树包含的元素大于该元素，不过与二叉排序树不同的是，这个2节点要么没有孩子，要么就有两个，不能只有一个孩子。

一个3节点包含一小一大两个元素和三个孩子（或没有孩子），一个3节点要么没有孩子，要么具有3个孩子，如果某个3节点有孩子的话，左子树包含小于较小元素的元素，右子树包含大于较大元素的元素，中间元素包含介于两元素之间的元素。

2-3-4树包含了4节点的使用，一个4节点包含小中大三个元素和四个孩子(或没有孩子)，一个4节点要么没有孩子，要么具有4个孩子，如果某个4节点有孩子的话，左子树包含小于最小元素的元素，第二子树包含大于最小元素、小于第二元素的元素，第三子树包含大于第二元素，小于最大元素的元素，右子树包含大于最大元素的元素

B树是一种平衡的多路查找树，2-3树与2-3-4树都是B树的特例，节点最大的孩子数目称为B树的阶。因此，2-3树是3阶B树，2-3-4树是4阶B树
![IMG_0379](https://cdn.jsdelivr.net/gh/sivanWu0222/ImageHosting@master/uPic/IMG_0379.jpg)

B+树参照《大话数据结构》P352


### 数据库的索引

### 数据库覆盖索引

### 数据库聚集索引和辅助索引


### MySQL 的索引
后面的问题：为什么用 b+树
b 和 b+区别

### 谈谈索引的数据结构？说了 B+树

### B+树和 B-树的区别以及优点？

### 为什么不用搜索树？


------------
## 锁
### mysql的锁类型
[参考](https://blog.csdn.net/qq_34337272/article/details/80611486)
### 行锁什么时候变表锁
### select语句什么时候行锁什么时候变表锁
### mysql的锁
### 用什么语句实现数据库锁
### innodb的一些特性，和Myisam的，行锁表锁

------------
## 存储引擎
### innodb的一些特性，和Myisam的，行锁表锁
### mysql中innodb引擎
### 知道哪些存储引擎
### 存储引擎在MySQL这个系统架构的哪个位置
### innodb与myisam的区别

### mysql的存储引擎
------------

## 设计
### 数据表设计遵循的原则

### 数据库三大范式
1. 第一范式：每个列都不可以再拆分。
2. 第二范式：在第一范式的基础上，非主键列完全依赖于主键，而不能是依赖于主键的一部分。
3. 第三范式：在第二范式的基础上，非主键列只依赖于主键，不依赖于其他非主键。
在设计数据库结构的时候，要尽量遵守三范式，如果不遵守，必须有足够的理由。比如性能。事实上我们经常会为了性能而妥协数据库的设计。
### 一范式为什么要列不可分割

### 设计学生成绩系统，如何建表，如何建索引
### 数据库表是如何设计的

------------

## 其他问题

### 数据库完整性的实现
### 主键
### 介绍mysql
### 数据库中有两个关联列，请问在搜索时，这两个关联列会怎样？
### Mysql怎么去查询的，什么时候走索引，什么时候不走
### Mysql了解什么，有没有搭过mysql、redis
### 数据库的部署怎么做
### 读写分离具体怎么做
### 数据库优化+缓存（缓存的不一致，binlog解析器），读写分离，分库分表
### mysql怎么存储时间
### mysql把邮戳转化为日常格式时间的函数
### sql慢查询
### 如果一个表查询，插入等很慢，你怎么做？
### mysql 分布式id（项目用到的）
### sql语句：查询所有课程分数都大于或等于80分的学生姓名
### 写个sql语句，两张表，学生表，学生课程表，求平均分大于85的学生的姓名
### sql语句：表【学生|科目|成绩】查询每个学生成绩最好的科目和成绩 ( 没完全写出来


### mysql 和 mongodb 的区别，什么时候用 mysql，什么时候用 mongo（因为简历上 有写 mongodb）



### 给定一张表 user(id,name,age)

有这样一个查询

select id,name,age where name=....

如何建立索引，并且使用到覆盖索引

### 一个教务系统，包括学生信息，课程信息，考试安排，成绩查询，绩点分析，你来设 计数据库表应该怎么设计？

用你刚刚设计的表来给我查询出全校所有高数在 85 分一以上的人的名字


### char 和 varchar

SQL：userId(主播 Id) de..Id(设备 Id)，怎么实现对主播与主播之间的重合数（共同关注

数）

### SQL，一个表 User，字段 userid，username，city 查询用户数量最多的三个城市。

### MySQL 的自增主键和随机生成主键的区别，为什么自增主键效率高。

### 如何查看数据库表结构？

### 如何提高 SQL 查询效率，在语句方面上的优化？